!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.altogic=t():e.altogic=t()}(self,(function(){return(()=>{var e={98:function(e,t){var r="undefined"!=typeof self?self:this,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,i="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function v(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&n&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e,t,r,i=f(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=p(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=l(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},i&&(d.prototype[Symbol.iterator]=d.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r,i,n=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),g.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},b.call(m.prototype),b.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];_.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function k(e,r){return new Promise((function(i,s){var o=new m(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();t.append(i,n)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;i(new _(n,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&n&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}k.polyfill=!0,e.fetch||(e.fetch=k,e.Headers=d,e.Request=m,e.Response=_),t.Headers=d,t.Request=m,t.Response=_,t.fetch=k,Object.defineProperty(t,"__esModule",{value:!0})}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=i;(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t},602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIBase=void 0,t.APIBase=class{constructor(e){this.fetcher=e}}},4:function(e,t,r){"use strict";var i,n,s,o,a,u,c,l,h,d=this&&this.__classPrivateFieldSet||function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},f=this&&this.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AltogicClient=void 0;const p=r(990),v=r(532),y=r(722),b=r(578),g=r(379),m=r(262),w=r(981),_=r(941),O=r(948),k=r(88),P={apiKey:void 0,signInRedirect:void 0,localStorage:null===(i=globalThis.window)||void 0===i?void 0:i.localStorage};t.AltogicClient=class{constructor(e,t,r){if(n.set(this,void 0),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),u.set(this,void 0),c.set(this,void 0),l.set(this,void 0),h.set(this,void 0),!e||!e.trim().startsWith("https://")&&!e.trim().startsWith("http://"))throw new p.ClientError("missing_required_value","envUrl is a required parameter and needs to start with https://");if((0,v.checkRequired)("clientKey",t),"string"!=typeof t)throw new p.ClientError("invalid_client_key","clientKey needs to be a valid key string");d(this,s,null,"f"),d(this,o,null,"f"),d(this,a,null,"f"),d(this,u,null,"f"),d(this,c,null,"f"),d(this,l,null,"f"),d(this,h,null,"f"),this.settings=Object.assign(Object.assign({},P),r);const i={"X-Client":"altogic-js","X-Client-Key":t};this.settings.apiKey&&(i.Authorization=this.settings.apiKey),d(this,n,new y.Fetcher(this,(0,v.normalizeUrl)(e),i),"f");const b=this.auth.getSession();f(this,n,"f").setSession(b)}get auth(){return f(this,s,"f")||d(this,s,new b.AuthManager(f(this,n,"f"),this.settings),"f"),f(this,s,"f")}get endpoint(){return f(this,o,"f")||d(this,o,new g.EndpointManager(f(this,n,"f")),"f"),f(this,o,"f")}get cache(){return f(this,a,"f")||d(this,a,new m.CacheManager(f(this,n,"f")),"f"),f(this,a,"f")}get queue(){return f(this,u,"f")||d(this,u,new w.QueueManager(f(this,n,"f")),"f"),f(this,u,"f")}get task(){return f(this,c,"f")||d(this,c,new _.TaskManager(f(this,n,"f")),"f"),f(this,c,"f")}get db(){return f(this,l,"f")||d(this,l,new O.DatabaseManager(f(this,n,"f")),"f"),f(this,l,"f")}get storage(){return f(this,h,"f")||d(this,h,new k.StorageManager(f(this,n,"f")),"f"),f(this,h,"f")}},n=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakMap},578:function(e,t,r){"use strict";var i,n,s,o,a,u=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))},c=this&&this.__classPrivateFieldSet||function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},l=this&&this.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthManager=void 0;const h=r(602),d=r(532);class f extends h.APIBase{constructor(e,{localStorage:t,signInRedirect:r}){super(e),i.add(this),n.set(this,void 0),s.set(this,void 0),c(this,n,t,"f"),c(this,s,r,"f")}clearLocalData(){l(this,i,"m",o).call(this)}invalidateSession(){l(this,i,"m",o).call(this),this.fetcher.clearSession(),globalThis.window&&l(this,s,"f")&&(globalThis.window.location.href=l(this,s,"f"))}getSession(){if(l(this,n,"f")){const e=l(this,n,"f").getItem("session");return e?JSON.parse(e):null}return null}getUser(){if(l(this,n,"f")){const e=l(this,n,"f").getItem("user");return e?JSON.parse(e):null}return null}setSession(e){this.fetcher.setSession(e),l(this,n,"f")&&e&&l(this,n,"f").setItem("session",JSON.stringify(e))}setUser(e){l(this,n,"f")&&e&&l(this,n,"f").setItem("user",JSON.stringify(e))}setSessionCookie(e,t,r){(0,d.setCookie)(t,r,"session_token",e,31536e3,"none",!0,!0)}removeSessionCookie(e,t){(0,d.setCookie)(e,t,"session_token","",-1,"none",!0,!0)}getUserFromDBbyCookie(e,t){return u(this,void 0,void 0,(function*(){const r=(0,d.getCookie)(e,t,"session_token");if(!r)return{user:null,errors:{status:400,statusText:"Bad Request",items:[{origin:"session_token_error",code:"session_token_not_found",message:"Cannot identify the session token 'session_token' from the request headers"}]}};const i={token:r};this.setSession(i);const{user:n,errors:s}=yield this.getUserFromDB();return s&&this.removeSessionCookie(e,t),{user:n,errors:s}}))}signUpWithEmail(e,t,r){return u(this,void 0,void 0,(function*(){const{data:n,errors:s}=yield this.fetcher.post("/_api/rest/v1/auth/signup-email",{email:e,password:t,name:r});return s?{user:null,session:null,errors:s}:(n.session&&(l(this,i,"m",o).call(this),l(this,i,"m",a).call(this,n.user,n.session),this.fetcher.setSession(n.session)),{user:n.user,session:n.session,errors:s})}))}signUpWithPhone(e,t,r){return u(this,void 0,void 0,(function*(){const{data:n,errors:s}=yield this.fetcher.post("/_api/rest/v1/auth/signup-phone",{phone:e,password:t,name:r});return s?{user:null,session:null,errors:s}:(n.session&&(l(this,i,"m",o).call(this),l(this,i,"m",a).call(this,n.user,n.session),this.fetcher.setSession(n.session)),{user:n.user,session:n.session,errors:s})}))}signInWithEmail(e,t){return u(this,void 0,void 0,(function*(){const{data:r,errors:n}=yield this.fetcher.post("/_api/rest/v1/auth/signin-email",{email:e,password:t});return n?{user:null,session:null,errors:n}:(l(this,i,"m",o).call(this),l(this,i,"m",a).call(this,r.user,r.session),this.fetcher.setSession(r.session),{user:r.user,session:r.session,errors:n})}))}signInWithPhone(e,t){return u(this,void 0,void 0,(function*(){const{data:r,errors:n}=yield this.fetcher.post("/_api/rest/v1/auth/signin-phone",{phone:e,password:t});return n?{user:null,session:null,errors:n}:(l(this,i,"m",o).call(this),l(this,i,"m",a).call(this,r.user,r.session),this.fetcher.setSession(r.session),{user:r.user,session:r.session,errors:n})}))}signInWithCode(e,t){return u(this,void 0,void 0,(function*(){const{data:r,errors:n}=yield this.fetcher.post(`/_api/rest/v1/auth/signin-code?code=${null!=t?t:""}&phone=${encodeURIComponent(e)}`);return n?{user:null,session:null,errors:n}:(l(this,i,"m",o).call(this),l(this,i,"m",a).call(this,r.user,r.session),this.fetcher.setSession(r.session),{user:r.user,session:r.session,errors:n})}))}signInWithProvider(e){globalThis.window&&(globalThis.window.location.href=`${this.fetcher.getBaseUrl()}/_auth/${e}`)}signOut(e){return u(this,void 0,void 0,(function*(){try{const{errors:t}=yield this.fetcher.post("/_api/rest/v1/auth/signout",{token:e}),r=this.getSession();return t||e&&(!r||e!==r.token)||(l(this,i,"m",o).call(this),this.fetcher.clearSession()),{errors:t}}catch(e){return{errors:null}}}))}signOutAll(){return u(this,void 0,void 0,(function*(){const{errors:e}=yield this.fetcher.post("/_api/rest/v1/auth/signout-all");return e||(l(this,i,"m",o).call(this),this.fetcher.clearSession()),{errors:e}}))}signOutAllExceptCurrent(){return u(this,void 0,void 0,(function*(){const{errors:e}=yield this.fetcher.post("/_api/rest/v1/auth/signout-all-except");return{errors:e}}))}getAllSessions(){return u(this,void 0,void 0,(function*(){const{data:e,errors:t}=yield this.fetcher.get("/_api/rest/v1/auth/sessions");return{sessions:e,errors:t}}))}getUserFromDB(){return u(this,void 0,void 0,(function*(){const{data:e,errors:t}=yield this.fetcher.get("/_api/rest/v1/auth/user");return{user:e,errors:t}}))}changePassword(e,t){return u(this,void 0,void 0,(function*(){const{errors:r}=yield this.fetcher.post("/_api/rest/v1/auth/change-pwd",{newPassword:e,oldPassword:t});return{errors:r}}))}getAuthGrant(e){return u(this,void 0,void 0,(function*(){const t=e||(0,d.getParamValue)("access_token"),{data:r,errors:n}=yield this.fetcher.get(`/_api/rest/v1/auth/grant?key=${null!=t?t:""}`);return n?{user:null,session:null,errors:n}:(l(this,i,"m",o).call(this),l(this,i,"m",a).call(this,r.user,r.session),this.fetcher.setSession(r.session),{user:r.user,session:r.session,errors:n})}))}resendVerificationEmail(e){return u(this,void 0,void 0,(function*(){const{errors:t}=yield this.fetcher.post(`/_api/rest/v1/auth/resend?email=${null!=e?e:""}`);return{errors:t}}))}resendVerificationCode(e){return u(this,void 0,void 0,(function*(){const{errors:t}=yield this.fetcher.post(`/_api/rest/v1/auth/resend-code?phone=${encodeURIComponent(e)}`);return{errors:t}}))}sendMagicLinkEmail(e){return u(this,void 0,void 0,(function*(){const{errors:t}=yield this.fetcher.post(`/_api/rest/v1/auth/send-magic?email=${null!=e?e:""}`);return{errors:t}}))}sendResetPwdEmail(e){return u(this,void 0,void 0,(function*(){const{errors:t}=yield this.fetcher.post(`/_api/rest/v1/auth/send-reset?email=${null!=e?e:""}`);return{errors:t}}))}sendResetPwdCode(e){return u(this,void 0,void 0,(function*(){const{errors:t}=yield this.fetcher.post(`/_api/rest/v1/auth/send-reset-code?phone=${encodeURIComponent(e)}`);return{errors:t}}))}sendSignInCode(e){return u(this,void 0,void 0,(function*(){const{errors:t}=yield this.fetcher.post(`/_api/rest/v1/auth/send-code?phone=${encodeURIComponent(e)}`);return{errors:t}}))}resetPwdWithToken(e,t){return u(this,void 0,void 0,(function*(){const{errors:r}=yield this.fetcher.post(`/_api/rest/v1/auth/reset-pwd?key=${null!=e?e:""}`,{newPassword:t});return{errors:r}}))}resetPwdWithCode(e,t,r){return u(this,void 0,void 0,(function*(){const{errors:i}=yield this.fetcher.post(`/_api/rest/v1/auth/reset-pwd-code?phone=${encodeURIComponent(e)}&code=${null!=t?t:""}`,{newPassword:r});return{errors:i}}))}changeEmail(e,t){return u(this,void 0,void 0,(function*(){const{data:r,errors:i}=yield this.fetcher.post("/_api/rest/v1/auth/change-email",{currentPassword:e,newEmail:t});return{user:r,errors:i}}))}changePhone(e,t){return u(this,void 0,void 0,(function*(){const{data:r,errors:i}=yield this.fetcher.post("/_api/rest/v1/auth/change-phone",{currentPassword:e,newPhone:t});return{user:r,errors:i}}))}verifyPhone(e,t){return u(this,void 0,void 0,(function*(){const{data:r,errors:n}=yield this.fetcher.post(`/_api/rest/v1/auth/verify-phone?code=${null!=t?t:""}&phone=${encodeURIComponent(e)}`);return n?{user:null,session:null,errors:n}:r.session?(l(this,i,"m",o).call(this),l(this,i,"m",a).call(this,r.user,r.session),this.fetcher.setSession(r.session),{user:r.user,session:r.session,errors:n}):{user:r.user,session:null,errors:n}}))}}t.AuthManager=f,n=new WeakMap,s=new WeakMap,i=new WeakSet,o=function(){l(this,n,"f")&&(l(this,n,"f").removeItem("session"),l(this,n,"f").removeItem("user"))},a=function(e,t){l(this,n,"f")&&(t&&l(this,n,"f").setItem("session",JSON.stringify(t)),e&&l(this,n,"f").setItem("user",JSON.stringify(e)))}},251:function(e,t,r){"use strict";var i,n=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))},s=this&&this.__classPrivateFieldSet||function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.BucketManager=void 0;const a=r(602),u=r(318),c={contentType:"text/plain;charset=UTF-8",createBucket:!1};class l extends a.APIBase{constructor(e,t){super(t),i.set(this,void 0),s(this,i,e,"f")}exists(){return n(this,void 0,void 0,(function*(){return"root"===o(this,i,"f")?{data:!0,errors:null}:yield this.fetcher.post("/_api/rest/v1/storage/bucket/exists",{bucket:o(this,i,"f")})}))}getInfo(e=!1){return n(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/get",{detailed:e,bucket:o(this,i,"f")})}))}empty(){return n(this,void 0,void 0,(function*(){const{errors:e}=yield this.fetcher.post("/_api/rest/v1/storage/bucket/empty",{bucket:o(this,i,"f")});return{errors:e}}))}rename(e){return n(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/rename",{newName:e,bucket:o(this,i,"f")})}))}delete(){return n(this,void 0,void 0,(function*(){const{errors:e}=yield this.fetcher.post("/_api/rest/v1/storage/bucket/delete",{bucket:o(this,i,"f")});return{errors:e}}))}makePublic(e=!1){return n(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/make-public",{includeFiles:e,bucket:o(this,i,"f")})}))}makePrivate(e=!1){return n(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/make-private",{includeFiles:e,bucket:o(this,i,"f")})}))}listFiles(e,t){return n(this,void 0,void 0,(function*(){let r=null,n=null;return e&&("string"==typeof e?r=e:"object"==typeof e&&(n=e)),t&&"object"==typeof t&&(n=t),yield this.fetcher.post("/_api/rest/v1/storage/bucket/list-files",{expression:r,options:n,bucket:o(this,i,"f")})}))}upload(e,t,r){return n(this,void 0,void 0,(function*(){if("undefined"!=typeof FormData&&t instanceof FormData||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof File&&t instanceof File)return"undefined"!=typeof XMLHttpRequest&&(null==r?void 0:r.onProgress)?yield this.fetcher.upload("/_api/rest/v1/storage/bucket/upload-formdata",t,{bucket:o(this,i,"f"),fileName:e,options:Object.assign(Object.assign(Object.assign({},c),r),{onProgress:void 0})},null,r.onProgress):yield this.fetcher.post("/_api/rest/v1/storage/bucket/upload-formdata",t,{bucket:o(this,i,"f"),fileName:e,options:Object.assign(Object.assign(Object.assign({},c),r),{onProgress:void 0})});{const n=Object.assign(Object.assign(Object.assign({},c),r),{onProgress:void 0});return yield this.fetcher.post("/_api/rest/v1/storage/bucket/upload-object",t,{bucket:o(this,i,"f"),fileName:e,options:n},{"Content-Type":n.contentType})}}))}file(e){return new u.FileManager(o(this,i,"f"),e,this.fetcher)}deleteFiles(e){return n(this,void 0,void 0,(function*(){const{errors:t}=yield this.fetcher.post("/_api/rest/v1/storage/bucket/delete-files",{fileNamesOrIds:e,bucket:o(this,i,"f")});return{errors:t}}))}addTags(e){return n(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/add-tags",{tags:e,bucket:o(this,i,"f")})}))}removeTags(e){return n(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/remove-tags",{tags:e,bucket:o(this,i,"f")})}))}updateInfo(e,t,r,s=!1){return n(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/update",{newName:e,isPublic:t,tags:r,includeFiles:s,bucket:o(this,i,"f")})}))}}t.BucketManager=l,i=new WeakMap},262:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CacheManager=void 0;const n=r(602);class s extends n.APIBase{constructor(e){super(e)}get(e){return i(this,void 0,void 0,(function*(){return yield this.fetcher.get(`/_api/rest/v1/cache?key=${e}`)}))}set(e,t,r){return i(this,void 0,void 0,(function*(){const{errors:i}=yield this.fetcher.post("/_api/rest/v1/cache",{key:e,value:t,ttl:r||void 0});return{errors:i}}))}delete(e){return i(this,void 0,void 0,(function*(){let t=null;t=Array.isArray(e)?e:[e];const{errors:r}=yield this.fetcher.delete("/_api/rest/v1/cache",{keys:t});return{errors:r}}))}increment(e,t=1,r){return i(this,void 0,void 0,(function*(){const{data:i,errors:n}=yield this.fetcher.post("/_api/rest/v1/cache/increment",{key:e,increment:t,ttl:r||void 0});return{data:i,errors:n}}))}decrement(e,t=1,r){return i(this,void 0,void 0,(function*(){const{data:i,errors:n}=yield this.fetcher.post("/_api/rest/v1/cache/decrement",{key:e,decrement:t,ttl:r||void 0});return{data:i,errors:n}}))}expire(e,t){return i(this,void 0,void 0,(function*(){const{errors:r}=yield this.fetcher.post("/_api/rest/v1/cache/expire",{key:e,ttl:t});return{errors:r}}))}getStats(){return i(this,void 0,void 0,(function*(){return yield this.fetcher.get("/_api/rest/v1/cache/stats")}))}listKeys(e,t){return i(this,void 0,void 0,(function*(){const{data:r,errors:i}=yield this.fetcher.post("/_api/rest/v1/cache/list-keys",{pattern:e,next:t});return i?{data:null,next:null,errors:i}:{data:r.data,next:r.next,errors:i}}))}}t.CacheManager=s},179:function(e,t,r){"use strict";var i,n,s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldSet||function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.DBObject=void 0;const u=r(602),c={cache:"nocache"},l={cache:"nocache",returnTop:!1},h={cache:"nocache",returnTop:!1},d={cache:"nocache",returnTop:!1},f={removeFromCache:!0,returnTop:!1},p={cache:"nocache",returnTop:!1};class v extends u.APIBase{constructor(e,t,r){super(t),i.set(this,void 0),n.set(this,void 0),o(this,i,e,"f"),o(this,n,r,"f")}get(e,t){return s(this,void 0,void 0,(function*(){let r=e,s=t;return Array.isArray(e)||"object"!=typeof e||(s=e,r=void 0),yield this.fetcher.post("/_api/rest/v1/db/object/get",{options:Object.assign(Object.assign({},c),s),id:a(this,n,"f"),lookups:r,model:a(this,i,"f")})}))}create(e,t){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/object/create",{values:e,options:Object.assign(Object.assign({},l),t),model:a(this,i,"f")})}))}set(e,t,r){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/object/set",{values:e,options:Object.assign(Object.assign({},h),r),id:a(this,n,"f"),parentId:t,model:a(this,i,"f")})}))}append(e,t,r){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/object/append",{values:e,options:Object.assign(Object.assign({},d),r),id:a(this,n,"f"),parentId:t,model:a(this,i,"f")})}))}delete(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/object/delete",{options:Object.assign(Object.assign({},f),e),id:a(this,n,"f"),model:a(this,i,"f")})}))}update(e,t){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/object/update",{values:e,options:Object.assign(Object.assign({},p),t),id:a(this,n,"f"),model:a(this,i,"f")})}))}updateFields(e,t){return s(this,void 0,void 0,(function*(){let r=null;return r=Array.isArray(e)?e:[e],yield this.fetcher.post("/_api/rest/v1/db/object/update-fields",{updates:r,options:Object.assign(Object.assign({},p),t),id:a(this,n,"f"),model:a(this,i,"f")})}))}}t.DBObject=v,i=new WeakMap,n=new WeakMap},948:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseManager=void 0;const n=r(602),s=r(582);class o extends n.APIBase{constructor(e){super(e)}model(e){return new s.QueryBuilder(e,this.fetcher)}getStats(){return i(this,void 0,void 0,(function*(){return yield this.fetcher.get("/_api/rest/v1/db/stats")}))}}t.DatabaseManager=o},379:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointManager=void 0;const n=r(602);class s extends n.APIBase{constructor(e){super(e)}get(e,t,r,n){return i(this,void 0,void 0,(function*(){return yield this.fetcher.get(e,t,r,n||"json")}))}post(e,t,r,n,s){return i(this,void 0,void 0,(function*(){return yield this.fetcher.post(e,t,r,n,s||"json")}))}put(e,t,r,n,s){return i(this,void 0,void 0,(function*(){return yield this.fetcher.put(e,t,r,n,s||"json")}))}delete(e,t,r,n,s){return i(this,void 0,void 0,(function*(){return yield this.fetcher.delete(e,t,r,n,s||"json")}))}}t.EndpointManager=s},318:function(e,t,r){"use strict";var i,n,s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldSet||function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.FileManager=void 0;const u=r(602),c={contentType:"text/plain;charset=UTF-8"};class l extends u.APIBase{constructor(e,t,r){super(r),i.set(this,void 0),n.set(this,void 0),o(this,i,e,"f"),o(this,n,t,"f")}exists(){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/exists",{file:a(this,n,"f"),bucket:a(this,i,"f")})}))}getInfo(){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/get",{file:a(this,n,"f"),bucket:a(this,i,"f")})}))}makePublic(){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/make-public",{file:a(this,n,"f"),bucket:a(this,i,"f")})}))}makePrivate(){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/make-private",{file:a(this,n,"f"),bucket:a(this,i,"f")})}))}download(){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/download",{file:a(this,n,"f"),bucket:a(this,i,"f")},null,null,"blob")}))}rename(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/rename",{newName:e,file:a(this,n,"f"),bucket:a(this,i,"f")})}))}duplicate(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/duplicate",{duplicateName:e,file:a(this,n,"f"),bucket:a(this,i,"f")})}))}delete(){return s(this,void 0,void 0,(function*(){const{errors:e}=yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/delete",{file:a(this,n,"f"),bucket:a(this,i,"f")});return{errors:e}}))}replace(e,t){return s(this,void 0,void 0,(function*(){if("undefined"!=typeof FormData&&e instanceof FormData||"undefined"!=typeof Blob&&e instanceof Blob||"undefined"!=typeof File&&e instanceof File)return"undefined"!=typeof XMLHttpRequest&&(null==t?void 0:t.onProgress)?yield this.fetcher.upload("/_api/rest/v1/storage/bucket/file/replace-formdata",e,{bucket:a(this,i,"f"),file:a(this,n,"f"),options:Object.assign(Object.assign(Object.assign({},c),t),{onProgress:void 0})},null,t.onProgress):yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/replace-formdata",e,{bucket:a(this,i,"f"),file:a(this,n,"f"),options:Object.assign(Object.assign(Object.assign({},c),t),{onProgress:void 0})});{const r=Object.assign(Object.assign(Object.assign({},c),t),{onProgress:void 0});return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/replace-object",e,{file:a(this,n,"f"),bucket:a(this,i,"f"),options:r},{"Content-Type":r.contentType})}}))}moveTo(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/move",{bucketNameOrId:e,file:a(this,n,"f"),bucket:a(this,i,"f")})}))}copyTo(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/copy",{bucketNameOrId:e,file:a(this,n,"f"),bucket:a(this,i,"f")})}))}addTags(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/add-tags",{tags:e,file:a(this,n,"f"),bucket:a(this,i,"f")})}))}removeTags(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/remove-tags",{tags:e,file:a(this,n,"f"),bucket:a(this,i,"f")})}))}updateInfo(e,t,r){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/bucket/file/update",{newName:e,isPublic:t,tags:r,file:a(this,n,"f"),bucket:a(this,i,"f")})}))}}t.FileManager=l,i=new WeakMap,n=new WeakMap},582:function(e,t,r){"use strict";var i,n,s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldSet||function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryBuilder=void 0;const u=r(602),c=r(179);class l extends u.APIBase{constructor(e,t){super(t),i.set(this,void 0),n.set(this,void 0),o(this,i,e,"f"),o(this,n,{expression:null,lookups:null,page:null,limit:null,sort:null,omit:null,group:null},"f")}object(e){return new c.DBObject(a(this,i,"f"),this.fetcher,e)}filter(e){return a(this,n,"f").expression=e,this}lookup(e){return a(this,n,"f").lookups?a(this,n,"f").lookups.push(e):a(this,n,"f").lookups=[e],this}page(e){return a(this,n,"f").page=e,this}limit(e){return a(this,n,"f").limit=e,this}sort(e,t){return a(this,n,"f").sort?a(this,n,"f").sort.push({field:e,direction:t}):a(this,n,"f").sort=[{field:e,direction:t}],this}omit(...e){return a(this,n,"f").omit?a(this,n,"f").omit.push(...e):a(this,n,"f").omit=[...e],this}group(e){return a(this,n,"f").group=e,this}create(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/create",{values:e,query:a(this,n,"f"),model:a(this,i,"f")})}))}set(e,t,r=!1){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/set",{values:e,parentId:t,returnTop:r,query:a(this,n,"f"),model:a(this,i,"f")})}))}append(e,t,r=!1){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/append",{values:e,parentId:t,returnTop:r,query:a(this,n,"f"),model:a(this,i,"f")})}))}get(e=!1){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/get-list",{query:a(this,n,"f"),returnCountInfo:e,model:a(this,i,"f")})}))}compute(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/compute",{query:a(this,n,"f"),computations:Array.isArray(e)?e:[e],model:a(this,i,"f")})}))}getSingle(){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/get-single",{query:a(this,n,"f"),model:a(this,i,"f")})}))}getRandom(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/get-random",{query:a(this,n,"f"),count:e,model:a(this,i,"f")})}))}update(e){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/update",{values:e,query:a(this,n,"f"),model:a(this,i,"f")})}))}updateFields(e){return s(this,void 0,void 0,(function*(){let t=null;return t=Array.isArray(e)?e:[e],yield this.fetcher.post("/_api/rest/v1/db/update-fields",{updates:t,query:a(this,n,"f"),model:a(this,i,"f")})}))}delete(){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/delete",{query:a(this,n,"f"),model:a(this,i,"f")})}))}searchText(e,t=!1){return s(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/db/search-text",{query:a(this,n,"f"),returnCountInfo:t,text:e,model:a(this,i,"f")})}))}}t.QueryBuilder=l,i=new WeakMap,n=new WeakMap},981:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.QueueManager=void 0;const n=r(602);class s extends n.APIBase{constructor(e){super(e)}submitMessage(e,t){return i(this,void 0,void 0,(function*(){const{data:r,errors:i}=yield this.fetcher.post("/_api/rest/v1/queue",{queueNameOrId:e,message:t});return{info:r,errors:i}}))}getMessageStatus(e){return i(this,void 0,void 0,(function*(){const{data:t,errors:r}=yield this.fetcher.get(`/_api/rest/v1/queue/${e}`);return{info:t,errors:r}}))}}t.QueueManager=s},88:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageManager=void 0;const n=r(602),s=r(251);class o extends n.APIBase{constructor(e){super(e)}bucket(e){return new s.BucketManager(e,this.fetcher)}createBucket(e,t=!0,r=[]){return i(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/create-bucket",{name:e,isPublic:t,tags:r})}))}listBuckets(e,t){return i(this,void 0,void 0,(function*(){let r=null,i=null;return e&&("string"==typeof e?r=e:"object"==typeof e&&(i=e)),t&&"object"==typeof t&&(i=t),yield this.fetcher.post("/_api/rest/v1/storage/list-buckets",{expression:r,options:i})}))}get root(){return new s.BucketManager("root",this.fetcher)}getStats(){return i(this,void 0,void 0,(function*(){return yield this.fetcher.get("/_api/rest/v1/storage/stats")}))}searchFiles(e,t){return i(this,void 0,void 0,(function*(){let r=null;return t&&"object"==typeof t&&(r=t),yield this.fetcher.post("/_api/rest/v1/storage/search-files",{expression:e,options:r})}))}deleteFile(e){return i(this,void 0,void 0,(function*(){return yield this.fetcher.post("/_api/rest/v1/storage/delete-file",{fileUrl:e})}))}}t.StorageManager=o},941:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskManager=void 0;const n=r(602);class s extends n.APIBase{constructor(e){super(e)}runOnce(e){return i(this,void 0,void 0,(function*(){const{data:t,errors:r}=yield this.fetcher.post("/_api/rest/v1/task",{taskNameOrId:e});return{info:t,errors:r}}))}getTaskStatus(e){return i(this,void 0,void 0,(function*(){const{data:t,errors:r}=yield this.fetcher.get(`/_api/rest/v1/task/${e}`);return{info:t,errors:r}}))}}t.TaskManager=s},683:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientError=void 0;class r extends Error{constructor(e,t,r){super(t),this.origin="client_error",this.code=e,this.message=t,this.details=r}}t.ClientError=r},722:function(e,t,r){"use strict";var i,n,s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldGet||function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Fetcher=void 0;const u=a(r(98)),c="invalid_session_token",l="missing_session_token";t.Fetcher=class{constructor(e,t,r){i.add(this),this.apiClient=e,this.restUrl=t,this.headers=r,this.session=null}get(e,t={},r={},a="json"){return s(this,void 0,void 0,(function*(){return o(this,i,"m",n).call(this,"GET",e,t,r,null,a)}))}post(e,t=null,r={},a={},u="json"){return s(this,void 0,void 0,(function*(){return o(this,i,"m",n).call(this,"POST",e,r,a,t,u)}))}put(e,t=null,r={},a={},u="json"){return s(this,void 0,void 0,(function*(){return o(this,i,"m",n).call(this,"PUT",e,r,a,t,u)}))}delete(e,t=null,r={},a={},u="json"){return s(this,void 0,void 0,(function*(){return o(this,i,"m",n).call(this,"DELETE",e,r,a,t,u)}))}setSession(e){e&&e.token&&(this.session=e,this.headers.Session=e.token)}clearSession(){this.session=null,delete this.headers.Session}getBaseUrl(){return this.restUrl}upload(e,t,r={},i={},n=null){return new Promise(((s,o)=>{let a,u=null!=e?e:"";u=u.trim(),u.startsWith("/")||(u="/"+u),"undefined"!=typeof FormData&&t instanceof FormData?a=t:(a=new FormData,a.append("file",t));const h=new XMLHttpRequest,d=Object.keys(r||{}).reduce(((e,t)=>{let i=r?r[t]:"";if(i=null!=i?i:"","object"==typeof i)try{i=JSON.stringify(i)}catch(e){i=""}return e?`${e}&${t}=${encodeURIComponent(i)}`:`?${t}=${encodeURIComponent(i)}`}),"");h.onload=()=>{if(200===h.status)s({data:JSON.parse(h.response),errors:null});else{const e=JSON.parse(h.response);(null==e?void 0:e.errors)&&Array.isArray(e.errors)&&e.errors.find((e=>e.code===c||e.code===l))&&this.apiClient.auth.invalidateSession(),s({data:null,errors:{status:h.status,statusText:h.statusText,items:(null==e?void 0:e.errors)?Array.isArray(e.errors)?e.errors:[e.errors]:Array.isArray(e.errors)?e:[e]}})}},h.onerror=e=>{o(e)},h.upload.onprogress=e=>{n&&"function"==typeof n&&e.total&&n(e.loaded,e.total,parseInt((e.loaded/e.total*100).toFixed(),10))},h.open("POST",this.restUrl+u+d);const f=Object.assign(Object.assign({},this.headers),i||{}),p=Object.keys(f);for(const e of p)"content-type"!==e.trim().toLowerCase()&&h.setRequestHeader(e,f[e]);h.withCredentials=!0,h.send(a)}))}},i=new WeakSet,n=function(e,t,r,i,n,o="json"){return s(this,void 0,void 0,(function*(){return new Promise(((a,h)=>{let d,f=null!=t?t:"";if(f=f.trim(),f.startsWith("/")||(f="/"+f),n){let e=!1;if("undefined"!=typeof FormData&&n instanceof FormData)d=n,e=!0;else if(("undefined"!=typeof Blob&&n instanceof Blob||"undefined"!=typeof File&&n instanceof File)&&"undefined"!=typeof FormData)d=new FormData,d.append("file",n),e=!0;else try{d=JSON.stringify(n),i||(i={}),i["Content-Type"]="application/json"}catch(e){d=n}if(i&&e){const e=Object.keys(i);for(const t of e)"content-type"===t.trim().toLowerCase()&&delete i[t]}}const p=Object.keys(r||{}).reduce(((e,t)=>{let i=r?r[t]:"";if(i=null!=i?i:"","object"==typeof i)try{i=JSON.stringify(i)}catch(e){i=""}return e?`${e}&${t}=${encodeURIComponent(i)}`:`?${t}=${encodeURIComponent(i)}`}),"");(0,u.default)(this.restUrl+f+p,{method:e,headers:Object.assign(Object.assign({},this.headers),i||{}),body:d,credentials:"include"}).then((e=>s(this,void 0,void 0,(function*(){if(e.ok)try{a("json"===o?{data:yield e.json(),errors:null}:"text"===o?{data:yield e.text(),errors:null}:"blob"===o?{data:yield e.blob(),errors:null}:"arraybuffer"===o?{data:yield e.arrayBuffer(),errors:null}:{data:yield e.json(),errors:null})}catch(e){a({data:null,errors:null})}else{const t=yield e.json();(null==t?void 0:t.errors)&&Array.isArray(t.errors)&&t.errors.find((e=>e.code===c||e.code===l))&&this.apiClient.auth.invalidateSession(),a({data:null,errors:{status:e.status,statusText:e.statusText?e.statusText:"Bad Request",items:(null==t?void 0:t.errors)?Array.isArray(t.errors)?t.errors:[t.errors]:Array.isArray(t)?t:[t]}})}}))),(e=>h(e)))}))}))}},532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=t.setCookie=t.checkRequired=t.getParamValue=t.normalizeUrl=t.removeTrailingSlash=void 0;const i=r(990);function n(e){return e.replace(/\/$/,"")}function s(e){return e?e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):e}t.removeTrailingSlash=n,t.normalizeUrl=function(e){return n(e.trim())},t.getParamValue=function(e){if(globalThis.window&&e){const t=globalThis.window.location.href;e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r&&r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):null}return null},t.checkRequired=function(e,t,r=!0){if(null==t)throw new i.ClientError("missing_required_value",`${e} is a required parameter, cannot be left empty`);if(r&&(""===t||"string"==typeof t&&""===t.trim()))throw new i.ClientError("missing_required_value",`${e} is a required parameter, cannot be left empty`)},t.setCookie=function(e,t,r,i,n,s,o,a){const u=function(e,t,r){let i=e+"="+function(e){return encodeURIComponent(e)}(t);switch(i+="; Max-Age="+Math.floor(r.maxAge),i+="; Path="+r.path,r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite){case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None"}return i}(r,function(e=""){try{const t=JSON.stringify(e);return/^[\{\[]/.test(t)?t:e}catch(t){return e}}(i),{path:"/",maxAge:n,sameSite:s,httpOnly:o,secure:a});if("undefined"==typeof window){if(e&&t){const e=t.getHeader("Set-Cookie");t.setHeader("Set-Cookie",e?e.concat(u):[u])}}else document&&(document.cookie=u)},t.getCookie=function(e,t,r){var i;let n={};if("undefined"==typeof window)e&&t&&(e.cookies&&(n=e.cookies),(null===(i=e.headers)||void 0===i?void 0:i.cookie)&&(n=function(e){if("string"!=typeof e||!e)return null;const t={};let r=0;for(;r<e.length;){const i=e.indexOf("=",r);if(-1===i)break;let n=e.indexOf(";",r);if(-1===n)n=e.length;else if(n<i){r=e.lastIndexOf(";",i-1)+1;continue}const o=e.slice(r,i).trim();if(void 0===t[o]){let r=e.slice(i+1,n).trim();34===r.charCodeAt(0)&&(r=r.slice(1,-1));try{t[o]=s(r)}catch(e){t[o]=r}}r=n+1}return t}(e.headers.cookie)));else if(document){const e=document.cookie?document.cookie.split("; "):[];for(const t of e){const e=t.split("="),r=e.slice(1).join("=");n[e[0]]=r}}const o=s(n[r]);return"true"===o||"false"!==o&&("undefined"!==o?"null"===o?null:o:void 0)}},944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polyfillGlobalThis=void 0,t.polyfillGlobalThis=function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,r),s.exports}var i={};return(()=>{"use strict";var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.CookieOptions=e.FileManager=e.FileUploadOptions=e.FileSortEntry=e.FileListOptions=e.BucketSortEntry=e.BucketListOptions=e.BucketManager=e.StorageManager=e.GroupComputation=e.DeleteInfo=e.UpdateInfo=e.FieldUpdate=e.SortEntry=e.DBAction=e.AppendOptions=e.SetOptions=e.UpdateOptions=e.DeleteOptions=e.CreateOptions=e.ComplexLookup=e.SimpleLookup=e.GetOptions=e.DBObject=e.QueryBuilder=e.TaskInfo=e.MessageInfo=e.ErrorEntry=e.APIError=e.User=e.ClientStorage=e.ClientOptions=e.Session=e.KeyValuePair=e.Fetcher=e.DatabaseManager=e.TaskManager=e.QueueManager=e.CacheManager=e.EndpointManager=e.AuthManager=e.AltogicClient=e.APIBase=e.createClient=void 0;const t=r(4);Object.defineProperty(e,"AltogicClient",{enumerable:!0,get:function(){return t.AltogicClient}});const n=r(602);Object.defineProperty(e,"APIBase",{enumerable:!0,get:function(){return n.APIBase}});const s=r(578);Object.defineProperty(e,"AuthManager",{enumerable:!0,get:function(){return s.AuthManager}});const o=r(379);Object.defineProperty(e,"EndpointManager",{enumerable:!0,get:function(){return o.EndpointManager}});const a=r(262);Object.defineProperty(e,"CacheManager",{enumerable:!0,get:function(){return a.CacheManager}});const u=r(981);Object.defineProperty(e,"QueueManager",{enumerable:!0,get:function(){return u.QueueManager}});const c=r(941);Object.defineProperty(e,"TaskManager",{enumerable:!0,get:function(){return c.TaskManager}});const l=r(948);Object.defineProperty(e,"DatabaseManager",{enumerable:!0,get:function(){return l.DatabaseManager}});const h=r(582);Object.defineProperty(e,"QueryBuilder",{enumerable:!0,get:function(){return h.QueryBuilder}});const d=r(179);Object.defineProperty(e,"DBObject",{enumerable:!0,get:function(){return d.DBObject}});const f=r(88);Object.defineProperty(e,"StorageManager",{enumerable:!0,get:function(){return f.StorageManager}});const p=r(251);Object.defineProperty(e,"BucketManager",{enumerable:!0,get:function(){return p.BucketManager}});const v=r(318);Object.defineProperty(e,"FileManager",{enumerable:!0,get:function(){return v.FileManager}});const y=r(722);Object.defineProperty(e,"Fetcher",{enumerable:!0,get:function(){return y.Fetcher}});const b=r(683);Object.defineProperty(e,"KeyValuePair",{enumerable:!0,get:function(){return b.KeyValuePair}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return b.Session}}),Object.defineProperty(e,"ClientOptions",{enumerable:!0,get:function(){return b.ClientOptions}}),Object.defineProperty(e,"ClientStorage",{enumerable:!0,get:function(){return b.ClientStorage}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return b.User}}),Object.defineProperty(e,"APIError",{enumerable:!0,get:function(){return b.APIError}}),Object.defineProperty(e,"ErrorEntry",{enumerable:!0,get:function(){return b.ErrorEntry}}),Object.defineProperty(e,"MessageInfo",{enumerable:!0,get:function(){return b.MessageInfo}}),Object.defineProperty(e,"TaskInfo",{enumerable:!0,get:function(){return b.TaskInfo}}),Object.defineProperty(e,"GetOptions",{enumerable:!0,get:function(){return b.GetOptions}}),Object.defineProperty(e,"SimpleLookup",{enumerable:!0,get:function(){return b.SimpleLookup}}),Object.defineProperty(e,"ComplexLookup",{enumerable:!0,get:function(){return b.ComplexLookup}}),Object.defineProperty(e,"CreateOptions",{enumerable:!0,get:function(){return b.CreateOptions}}),Object.defineProperty(e,"DeleteOptions",{enumerable:!0,get:function(){return b.DeleteOptions}}),Object.defineProperty(e,"UpdateOptions",{enumerable:!0,get:function(){return b.UpdateOptions}}),Object.defineProperty(e,"SetOptions",{enumerable:!0,get:function(){return b.SetOptions}}),Object.defineProperty(e,"AppendOptions",{enumerable:!0,get:function(){return b.AppendOptions}}),Object.defineProperty(e,"DBAction",{enumerable:!0,get:function(){return b.DBAction}}),Object.defineProperty(e,"SortEntry",{enumerable:!0,get:function(){return b.SortEntry}}),Object.defineProperty(e,"FieldUpdate",{enumerable:!0,get:function(){return b.FieldUpdate}}),Object.defineProperty(e,"UpdateInfo",{enumerable:!0,get:function(){return b.UpdateInfo}}),Object.defineProperty(e,"DeleteInfo",{enumerable:!0,get:function(){return b.DeleteInfo}}),Object.defineProperty(e,"GroupComputation",{enumerable:!0,get:function(){return b.GroupComputation}}),Object.defineProperty(e,"BucketListOptions",{enumerable:!0,get:function(){return b.BucketListOptions}}),Object.defineProperty(e,"BucketSortEntry",{enumerable:!0,get:function(){return b.BucketSortEntry}}),Object.defineProperty(e,"FileListOptions",{enumerable:!0,get:function(){return b.FileListOptions}}),Object.defineProperty(e,"FileSortEntry",{enumerable:!0,get:function(){return b.FileSortEntry}}),Object.defineProperty(e,"FileUploadOptions",{enumerable:!0,get:function(){return b.FileUploadOptions}}),Object.defineProperty(e,"CookieOptions",{enumerable:!0,get:function(){return b.CookieOptions}}),(0,r(944).polyfillGlobalThis)(),e.createClient=(e,r,i)=>new t.AltogicClient(e,r,i)})(),i})()}));